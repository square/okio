apply plugin: 'java-library'
apply plugin: 'ru.vyarus.animalsniffer'

kotlin.targets.matching { it.platformType.name == 'jvm' }.all { target ->
  target.project.sourceCompatibility = JavaVersion.VERSION_1_7
  target.project.targetCompatibility = JavaVersion.VERSION_1_7

  def targetName = target.name
  def jar = tasks["${targetName}Jar"]
  jar.configure {
    manifest {
      attributes('Automatic-Module-Name': 'okio')
    }
  }

  target.project.animalsniffer {
    sourceSets = [target.project.sourceSets.main]
  }
}
